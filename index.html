<script>
  // Retrieve a parameter value from the URL
  function getQueryParam(param) {
    let urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
  }

  // Save relevant parameters to Local Storage
  function saveSubIDs() {
    let subid = getQueryParam('subid');
    let subid2 = getQueryParam('subid2');
    let subid3 = getQueryParam('subid3');
    let subid4 = getQueryParam('subid4');
    let subid5 = getQueryParam('subid5');

    if (subid) localStorage.setItem('subid', subid);
    if (subid2) localStorage.setItem('subid2', subid2);
    if (subid3) localStorage.setItem('subid3', subid3);
    if (subid4) localStorage.setItem('subid4', subid4);
    if (subid5) localStorage.setItem('subid5', subid5);
  }

  // Append saved IDs to links on the page
  function appendSubIDsToLinks() {
    let subid = localStorage.getItem('subid');
    let subid2 = localStorage.getItem('subid2');
    let subid3 = localStorage.getItem('subid3');
    let subid4 = localStorage.getItem('subid4');
    let subid5 = localStorage.getItem('subid5');

    document.querySelectorAll('a').forEach(link => {
      let url = new URL(link.href);
      if (subid) url.searchParams.set('subid', subid);
      if (subid2) url.searchParams.set('subid2', subid2);
      if (subid3) url.searchParams.set('subid3', subid3);
      if (subid4) url.searchParams.set('subid4', subid4);
      if (subid5) url.searchParams.set('subid5', subid5);

      link.href = url.toString();
    });
  }

  document.addEventListener('DOMContentLoaded', () => {
    saveSubIDs();
    appendSubIDsToLinks();
  });
  
  // Timer functionality
  var time = 15;
  var timerElement = document.getElementById('time');
  var interval = setInterval(function() {
      var minutes = Math.floor(time / 60);
      var seconds = time % 60;
      timerElement.textContent = minutes + ':' + (seconds < 10 ? '0' + seconds : seconds);
      time--;

      if (time < 0) {
          clearInterval(interval);
          timerElement.textContent = "Time expired";
          timerElement.style.color = "#FF6347"; // Adding a red color for expiration alert
      }
  }, 1000);
</script>
